<% if (config) { -%>
import config from 'alp-rollup-plugin-config';
<% } -%>
import createRollupConfig from 'pob-babel/createRollupConfig.js';
import run from 'pob-babel/plugin-run.cjs';

const watch = process.env.ROLLUP_WATCH === 'true';

export default createRollupConfig({
  cwd: new URL('.', import.meta.url).pathname,
  outDirectory: 'build',
  plugins: [
<% if (config) { -%>
    config({
      targets: [{ src: 'src/config/**/*.yml' }],
    }),
<% } -%>
    watch && run({ execArgv: ['--enable-source-maps'] })],
});
