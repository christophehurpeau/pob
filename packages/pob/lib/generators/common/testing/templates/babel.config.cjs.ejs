'use strict';

module.exports = function babelConfig(api) {
  const isTest = api.env('test');

  if (!isTest) return {};

  return {
    only: [<%- only %>],
    presets: [
      [require.resolve('pob-babel/preset.js')<% if (!jestExperimentalESM) { %>, { modules: 'commonjs' }<% } %>]
      <% if (hasReact) { %>, [
        '@babel/preset-react',
        {
          runtime: 'automatic',
          development: false,
          useBuiltIns: true,
          useSpread: true,
        },
      ]<% } %>
      <% if (hasLinaria) { %>, [
        '@linaria/babel-preset'
      ]<% } %>
    ],
  };
};
